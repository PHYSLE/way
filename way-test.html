<!DOCTYPE HTML>
<html>
<head>
<style>
  td {border: 1px solid #ccc; width:20px; height: 20px;}
  td.block {background-color: #000;}
  td:not(.block) {cursor:pointer;}
</style>
<script src="way.js"></script>
<script>
var grid = new Grid(10, 10);
for(var x=0; x < grid.width; x++) {
  for(var y=0; y < grid.height; y++) {
    var b = Math.floor(Math.random() * 4);
    if (x==0 && y==0) {
      b = 1;
    }
    if (x==9 && y==9) {
      b = 1;
    }
    var c = new Cell(x, y, b);
    grid.setCell(c);
  }
}


var html = '<table><tr>'
var y = 0;
grid.eachCell(function(c) {
  if (c.y != y) {
    html += '</tr><tr>';
    y = c.y;
  }
  if (c.bias == 0 ) {
    html += '<td id="'+c.x+'_'+c.y+'" class="block">&nbsp;</td>'
  }
  else {
    html += '<td id="'+c.x+'_'+c.y+'" onclick="findWay('+c.x+','+c.y+')"></td>'
  }
})
html += '</tr></table>';

function findWay(x,y) {
  grid.eachCell(function(c) {
    if (c.bias) {
      var el = document.getElementById(c.x + '_' + c.y);
      el.style.backgroundColor = '#fff';
    }
  });
  var way = grid.findWay(grid.getCell(0,0),grid.getCell(x,y));

  if (way) {
    for (var w=0; w<way.length; w++) {
      var el = document.getElementById(way[w].x + '_' + way[w].y);
      el.style.backgroundColor = '#900';
    }
    document.getElementById('message').innerHTML = "PATH LENGTH: " + way.length;
  }
  else {
    document.getElementById('message').innerHTML = "NO PATH";
  }
}
</script>
</head>
<body>
<div id="output"></div>
<div id="message"></div>
<script>
document.getElementById('output').innerHTML = html;
document.getElementById('message').innerHTML = grid.count + ' CELL GRID';
</script>
</body>
</html>
