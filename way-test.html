<!DOCTYPE HTML>
<html>
<head>
<style>
  body {font-family: sans-serif;}
  td {border: 1px solid #ccc; width:24px; height: 24px; color: #fff; font-size:11px;}
  td.block {background-color: #000;}
  td:not(.block) {cursor:pointer;}
</style>
<script src="way.js"></script>
<script>
var grid = new Grid(20, 20);
for(var x=0; x < grid.width; x++) {
  for(var y=0; y < grid.height; y++) {
    var b = Math.floor(Math.random() * 4) == 0 ? 0 : 1;
    if ((x==0 && y==0) || (x==9 && y==9)) {
      b = 1;
    }

    var c = new Cell(x, y, b);
    grid.setCell(c);
  }
}


var html = '<table><tr>'
var y = 0;
grid.eachCell(function(c) {
  if (c.y != y) {
    html += '</tr><tr>';
    y = c.y;
  }
  if (c.bias == 0 ) {
    html += '<td id="'+c.x+'_'+c.y+'" class="block"></td>'
  }
  else {
    html += '<td id="'+c.x+'_'+c.y+'" onclick="findWay('+c.x+','+c.y+')"></td>'
  }
})
html += '</tr></table>';

function findWay(x,y) {
  var start = grid.getCell(0,0);
  var end = grid.getCell(x,y);
  grid.eachCell(function(c) {
    if (c.bias) {
      var el = document.getElementById(c.x + '_' + c.y);
      el.style.backgroundColor = '#fff';
      el.innerHTML = "";
    }
  });
  var way = grid.findWay(start, end);

  if (way) {
    for (var w=0; w<way.length; w++) {
      var el = document.getElementById(way[w].x + '_' + way[w].y);
      el.style.backgroundColor = '#900';
      el.innerHTML = w + '<br />' + way[w].wayCost(start, end);
    }
  }
}
</script>
</head>
<body onload="document.getElementById('output').innerHTML = html;">
<a href="way-test.html">Refresh</a>
<div id="output"></div>
</body>
</html>
